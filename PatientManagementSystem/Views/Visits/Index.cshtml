@model IEnumerable<PatientManagementSystem.Models.Visits>

@{
    ViewBag.Title = "Patient Visit List";
}

<h2>Patient Visits</h2>

@{ int? paid = 0; }
@{ foreach(var p in Model){
        paid = p.PatientId;
}}


@Html.ActionLink("Add New Visit", "Create", new { id = paid })

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.PatientId)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.patient.FullName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Initial)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.VisitDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.IsHIVManagement)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.IsOtherManagement)
        </th>
        <th>           
        </th>
    </tr>
    
@foreach (var item in Model) {
    <tr>       
        <td>
            @Html.DisplayFor(modelItem => item.PatientId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.patient.FullName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Initial)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.VisitDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IsHIVManagement)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IsOtherManagement)
        </td> 
        <td>               
            @Html.ActionLink("Edit", "Edit", new { id=item.VisitId }) |
            @Html.ActionLink("Details", "Details", new { id=item.VisitId }) | 
            @Html.ActionLink("Billing Details", "BillingDetails", new { id = item.VisitId}) |                   
            @if (item.IsHIVManagement)
            {
                @Html.ActionLink("Add or Edit HIV Management", "HIVIndex", "HIVManagements", new { id = item.VisitId }, null)
            }            
            else if (item.IsOtherManagement)
            {
                @Html.ActionLink("Add or Edit Other Management", "OtherIndex", "OtherManagements", new { id = item.VisitId }, null)
            }
            | @Html.ActionLink("Delete", "Delete", new { id = item.VisitId })
        </td>
    </tr>
    
    }
    
</table>


