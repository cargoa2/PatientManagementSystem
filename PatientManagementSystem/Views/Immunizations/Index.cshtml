@model IEnumerable<PatientManagementSystem.Models.Immunizations>

@{
    ViewBag.Title = "Index";
}

@{ int? paid = 0; }
@{ string pn = ""; }
@{ foreach (var p in Model)
    {
        paid = p.PatientId;
        pn = p.Patient.FullName;
    }
}
<h4>KENTUCKIANA INFECTIOUS DISEASE CONSULTANTS, PSC</h4>
<h5>Barbara Wojda, M.D</h5>
<h5>125 Fairfax Avenue, Louisville, KY 40207</h5>
<h5>Phone (502) 895-6155 Fax (502) 895-6156</h5>
<h5>drbarbarawojda.com</h5>

<h2>Immunizations List</h2>

<table>    
    <tr>
        <td>
            <b>Patient Name:  @pn</b>
        </td>
    </tr>
</table>
<br />
        <p>
            @Html.ActionLink("Add new Immunization", "Create", new { id = paid })
        </p>
        <table class="table">
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Patient.BirthDate)
                </th>                    
                <th>
                    @Html.DisplayNameFor(model => model.ImmDate)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Notes)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.FilePath)
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Patient.BirthDate)
                    </td>                        
                    <td>
                        @Html.DisplayFor(modelItem => item.ImmDate)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Notes)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.FilePath)
                    </td>
                    <td>
                        @Html.ActionLink("Open", "GetImmFile", "Immunizations", new { id = item.ImmId }, null) |
                        @Html.ActionLink("Edit", "Edit", new { id = item.ImmId }) |
                        @Html.ActionLink("Details", "Details", new { id = item.ImmId }) |
                        @Html.ActionLink("Delete", "Delete", new { id = item.ImmId })
                    </td>
                </tr>
            }

        </table>

        <br />
        @Html.ActionLink("Go back to patient", "PatientIndex", "Patients", new { id = paid }, null)
